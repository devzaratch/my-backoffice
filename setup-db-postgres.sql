
CREATE TABLE IF NOT EXISTS users (
  id SERIAL PRIMARY KEY,
  username VARCHAR(50) NOT NULL UNIQUE,
  full_name VARCHAR(100),
  phone VARCHAR(20),
  credit NUMERIC(10,2) DEFAULT 0.00,
  status VARCHAR(20) DEFAULT 'PENDING',
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE IF NOT EXISTS status_logs (
  id SERIAL PRIMARY KEY,
  user_id INT NOT NULL,
  old_status VARCHAR(20),
  new_status VARCHAR(20) NOT NULL,
  changed_by VARCHAR(50) DEFAULT 'system',
  changed_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- เพิ่มข้อมูลตัวอย่าง
INSERT INTO users (username, full_name, phone, credit, status) VALUES
('ufsb7320554', 'TOLA KEOALAIHAK MR', '024120001734575001', 0.46, 'APPROVED'),
('ufsb9126858', 'MANYSID PHONESALY MRS', '073120000955178001', 507.04, 'APPROVED'),
('ufsb9198399', 'CHANTHO XAYYATEM MS', '0301400410043669', 0.10, 'APPROVED')
ON CONFLICT DO NOTHING;

